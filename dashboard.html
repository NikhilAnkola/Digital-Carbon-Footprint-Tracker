<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Digital Carbon Footprint Tracker</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <!-- State Selection -->
    <label for="stateSelect"><b>Select your state:</b></label>
    <select id="stateSelect">
        <option value="default">India (Default)</option>
        <option value="Andhra Pradesh">Andra Pradesh</option>
        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
        <option value="Ass am">Assam</option>
        <option value="Bi har">Bihar</option>
        <option value="Chhattis garh">Chattisgarh</option>
        <option value="Go a">Goa</option>
        <option value="Guja rat">Gujarat</option>
        <option value="Har yana">Haryana</option>
        <option value="Himachal Pradesh">Himachal Pradesh</option>
        <option value="Jharkh and">Jharkhand</option>
        <option value="Karna taka">Karnataka</option>
        <option value="Ker ala">Kerala</option>
        <option value="Madhya Pradesh">Madhya Pradesh</option>
        <option value="Mahar ashtra">Maharashtra</option>
        <option value="Mani pur">Manipur</option>
        <option value="Megha laya">Meghalaya</option>
        <option value="Mizo ram">Mizoram</option>
        <option value="Naga land">Nagaland</option>
        <option value="Odi sha">Odisha</option>
        <option value="Pun jab">Punjab</option>
        <option value="Rajas than">Rajasthan</option>
        <option value="Sikk im">Sikkim</option>
        <option value="Tamil Nadu">Tamil Nadu</option>
        <option value="Telan gana">Telangana</option>
        <option value="Tri pura">Tripura</option>
        <option value="Uttar Pradesh">Uttar Pradesh</option>
        <option value="Uttara khand">Uttarakhand</option>
        <option value="West Bengal">West Bengal</option>
    </select>

    <div class="row">
      <!-- === Today's Usage: COâ‚‚ by Site (Pie) === -->
      <section class="card">
      <h2>Today's Usage â€” COâ‚‚ by Site</h2>
      <div class="chart-wrap">
          <canvas id="todayPieChart" width="400" height="400" aria-label="Today CO2 share by site"></canvas>
          <div id="todayPieEmpty" class="empty hidden">No data for today yet.</div>
      </div>
      </section>

      <!-- Today's Usage Summary -->
      <section class="card">
        <h2>Today's Usage Summary</h2>
        <div id="usageContainer"><p>Loading...</p></div>
        <ul>
            <li><b>Total COâ‚‚ emitted:</b> <span id="totalCO2">0</span> g</li>
            <li><b>Equivalent to:</b> <span id="co2Equivalent">â€“</span></li>
        </ul>
      </section>
    </div>

    <!-- Prediction Section -->
      <section class="card centered">
        <label>Days Ahead:</label>
        <input type="number" id="daysAhead" min="1" max="7" value="1">
        <button id="predictBtn">Predict</button>
        <div id="predictionResult">Prediction will appear here.</div>
      </section>

    <div class="row">
      <!-- === Last 28 Days: COâ‚‚ per Day (Bar, 7 at a time) === -->
      <section class="card">
        <div class="header-row">
            <h2>Last 28 Days â€” COâ‚‚ per Day</h2>
            <div class="pager">
            <button id="prev7" type="button" class="btn">Prev 7</button>
            <button id="next7" type="button" class="btn">Next 7</button>
            </div>
        </div>
        <div class="chart-wrap">
            <canvas id="historyBarChart" width="700" height="360" aria-label="Last 28 days CO2 bar chart"></canvas>
            <div id="historyBarEmpty" class="empty hidden">No history yet.</div>
        </div>
      </section>

      <!-- Last 28 Days History -->
        <section class="card">
          <h2>Last 28 Days History</h2>
          <div id="historyContainer"><p>Loading history...</p></div>
        </section>
    </div>    

    <!-- ğŸŒ± Gamification Section -->
    <section id="gamification">
      <h2>ğŸŒ± Gamification</h2>

      <div class="gamification-cards">
        <div class="card">
          <h3>ğŸ”¥ Streak</h3>
          <p id="streak-current">Current: 0</p>
          <p id="streak-max">Max: 0</p>
        </div>

        <div class="card">
          <h3>ğŸ† Eco Points</h3>
          <p id="eco-points">0</p>
        </div>

        <div class="card">
          <h3>ğŸŒ³ Garden</h3>
          <p id="garden">Seedlings: 0, Plants: 0, Trees: 0</p>
        </div>
      </div>
    </section>

    <div class="footer-buttons">
      <!-- Buttons -->
      <button id="resetBtn" class="btn">Reset All Data</button>
      <button id="refreshChartsBtn" class="btn">Refresh Charts</button>
    </div>

    <script src="rule_suggestions.js"></script>
    <script src="dashboard.js" defer></script>
    <script src="libs/chart.umd.js"></script>
    <script src="dashboard-charts.js"></script>
</body>
</html>